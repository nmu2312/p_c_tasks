# 20

## 課題1

### viewとは何か
ビュー（VIEW）とは、テーブルの特定の部分や複数のテーブルを結合し、ユーザに必要な部分だけをあたかも一つのテーブルであるかのように見せるための仮想的なテーブルのこと。  
ビューの実体はデータを持たないSQL文であり、CREATE TABLE文で作成する物理的なテーブルとは異なる。
実体としてのデータは存在しないが、ユーザーからはテーブル操作を行うのと同じ感覚で参照することが可能。

### viewの用途、メリット

#### データ抽出の簡略化

ビューを作成しておけば、ユーザーはビューにアクセスするだけで自動的に作成済みのクエリが実行されるため、データの参照を簡略化することができる。

#### セキュリティ
ビューを利用することにより、実体のテーブルに格納されているユーザーに直接見せたくないデータへのアクセスを制限することが可能になる。  
表とビューにそれぞれアクセス制御をかけることによって、参照できるユーザを特定し、情報の漏洩を防ぐことができる。

### materialized view
テリアライズド ビュー（MV）は事前に計算されたビューであり、パフォーマンスと効率の改善を目的としてクエリの結果を定期的にキャッシュに保存する。パフォーマンスを高速化できるが更新しないと差分が生じるので注意。

## 課題2

CREATE VIEW simmel_male AS SELECT * FROM employees WHERE last_name='Simmel' AND gender='M';

VIEWを使ってもパフォーマンスはほぼ変わらず（マテリアライズドビューではないため）
```sql
0.080997 | SELECT * FROM simmel_male WHERE DATE_FORMAT(hire_date,'%Y') = 1995

0.081347 | SELECT * FROM employees WHERE last_name='Simmel' AND gender='M' and  DATE_FORMAT(hire_date,'%Y') = 1995
```